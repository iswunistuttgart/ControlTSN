<tsn-uni xmlns="urn:isw:controltsn">
  <modules>
    <mod>
      <id>1</id>
      <name>REST</name>
      <desc>Exposes a REST API to interact with the framework</desc>
      <executable-path>./RESTModule</executable-path>
      <subscribed-events-mask>4223155493794047</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
      <data>
        <entry>
          <data-name>export_rest_api</data-name>
          <data-type>string</data-type>
          <data-value>http://localhost:11068/export</data-value>
        </entry>
      </data>
    </mod>
    <mod>
      <id>2</id>
      <name>CUC</name>
      <desc>Represents the Central User Controller in the network based on the central configuration approach of TSN</desc>
      <executable-path>./CUCModule</executable-path>
      <subscribed-events-mask>50331753</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
      <data>
        <entry>
          <data-name>cnc_url</data-name>
          <data-type>string</data-type>
          <data-value>http://localhost:11067/streams/compute_requests</data-value>
        </entry>
      </data>
    </mod>
    <mod>
      <id>3</id>
      <name>Monitor</name>
      <desc>This module monitors the network including the streams and their latency, synchronization etc.</desc>
      <executable-path>./MonitorModule</executable-path>
      <subscribed-events-mask>1</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
      <data>
        <entry>
          <data-name>test</data-name>
          <data-type>string</data-type>
          <data-value>hallo</data-value>
        </entry>
      </data>
    </mod>
    <mod>
      <id>4</id>
      <name>Container</name>
      <desc>This module performs the application deployment to the enddevices.</desc>
      <executable-path>./ContainerModule</executable-path>
      <subscribed-events-mask>1030792151040</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
      <data>
        <entry>
          <data-name>registry_url</data-name>
          <data-type>string</data-type>
          <data-value>http://containerregistry:5000</data-value>
        </entry>
        <entry>
          <data-name>kubernetes_url</data-name>
          <data-type>string</data-type>
          <data-value>http://localhost:8001</data-value>
        </entry>
      </data>
    </mod>
    <mod>
      <id>5</id>
      <name>AppConfiguration</name>
      <desc>Configures the distributed applications and writes their parameterization</desc>
      <executable-path>./ConfigurationModule</executable-path>
      <subscribed-events-mask>4222124650659840</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
    </mod>
  </modules>
  <application>
    <apps>
      <app>
        <id>PCM_0.0.1</id>
        <name>PCM</name>
        <desc>Application which publishes PCM Data</desc>
        <version>0.0.1</version>
        <has-image>1</has-image>
        <image-ref>PCMImage_0.0.1</image-ref>
        <has-mac>1</has-mac>
        <mac>00-1B-21-ED-A9-92</mac>
      </app>
      <app>
        <id>PowerConsumer1_0.0.1</id>
        <name>PowerConsumer1</name>
        <desc>Application which consumes Power Data</desc>
        <version>0.0.1</version>
        <has-image>1</has-image>
        <image-ref>PowerConsumerImage_0.0.1</image-ref>
        <has-mac>1</has-mac>
        <mac>48-21-0b-26-3d-8a</mac>
        <iface>enp88s0.4003</iface>
        <parameters>
          <parameter>
            <param-name>LowerEnergyBound</param-name>
            <param-type>decimal64</param-type>
            <param-value>0.0000000000</param-value>
            <param-desc>The lower limit of the energy value to be monitored</param-desc>
          </parameter>
          <parameter>
            <param-name>UpperEnergyBound</param-name>
            <param-type>decimal64</param-type>
            <param-value>500.0000000000</param-value>
            <param-desc>The upper limit of the energy value to be monitored</param-desc>
          </parameter>
          <parameter>
            <param-name>EnergyThreshold</param-name>
            <param-type>decimal64</param-type>
            <param-value>400.0000000000</param-value>
            <param-desc>The threshold value of the energy from when a warning should be emitted</param-desc>
          </parameter>
          <parameter>
            <param-name>COMPort</param-name>
            <param-type>string</param-type>
            <param-value>/dev/ttyUSB0</param-value>
            <param-desc>The COM port to be used for communication with the microcontroller</param-desc>
          </parameter>
          <parameter>
            <param-name>LEDsCount</param-name>
            <param-type>uint16</param-type>
            <param-value>71</param-value>
            <param-desc>How much LEDs are on the connected Stripe</param-desc>
          </parameter>
          <parameter>
            <param-name>LEDRefreshHz</param-name>
            <param-type>uint16</param-type>
            <param-value>100</param-value>
            <param-desc>How often the LEDs should be updated per second</param-desc>
          </parameter>
        </parameters>
      </app>
      <app>
        <id>PowerConsumer2_0.0.1</id>
        <name>PowerConsumer2</name>
        <desc>Application which consumes Power Data</desc>
        <version>0.0.1</version>
        <has-image>1</has-image>
        <image-ref>PowerConsumerImage_0.0.1</image-ref>
        <has-mac>1</has-mac>
        <mac>48-21-0b-26-3f-ed</mac>
        <iface>enp88s0.4003</iface>
        <parameters>
          <parameter>
            <param-name>LowerEnergyBound</param-name>
            <param-type>decimal64</param-type>
            <param-value>0.0000000000</param-value>
            <param-desc>The lower limit of the energy value to be monitored</param-desc>
          </parameter>
          <parameter>
            <param-name>UpperEnergyBound</param-name>
            <param-type>decimal64</param-type>
            <param-value>500.0000000000</param-value>
            <param-desc>The upper limit of the energy value to be monitored</param-desc>
          </parameter>
          <parameter>
            <param-name>EnergyThreshold</param-name>
            <param-type>decimal64</param-type>
            <param-value>400.0000000000</param-value>
            <param-desc>The threshold value of the energy from when a warning should be emitted</param-desc>
          </parameter>
          <parameter>
            <param-name>COMPort</param-name>
            <param-type>string</param-type>
            <param-value>/dev/ttyUSB0</param-value>
            <param-desc>The COM port to be used for communication with the microcontroller</param-desc>
          </parameter>
          <parameter>
            <param-name>LEDsCount</param-name>
            <param-type>uint16</param-type>
            <param-value>71</param-value>
            <param-desc>How much LEDs are on the connected Stripe</param-desc>
          </parameter>
          <parameter>
            <param-name>LEDRefreshHz</param-name>
            <param-type>uint16</param-type>
            <param-value>100</param-value>
            <param-desc>How often the LEDs should be updated per second</param-desc>
          </parameter>
        </parameters>
      </app>
    </apps>
    <images>
      <image>
        <id>PCMImage_0.0.1</id>
        <name>PCMImage</name>
        <desc>Image of the Power Consumption Module (PCM) as Publisher</desc>
        <version>0.0.1</version>
      </image>
      <image>
        <id>PowerConsumerImage_0.0.1</id>
        <name>PowerConsumerImage</name>
        <desc>Image of a Consumer of the PCM Data as Subscriber</desc>
        <version>0.0.1</version>
      </image>
    </images>
  </application>
  <topology>
    <devices>
      <!-- TSN Demo Setup -->
      <enddevices>
        <enddevice>
          <mac>48-21-0b-26-3d-8a</mac>
          <iface>enp88s0</iface>
          <name>NUC 1</name>
          <num-cores>2</num-cores>
          <interface-uri>opc.tcp://localhost:62541</interface-uri>
          <has-app>0</has-app>
        </enddevice>
        <enddevice>
          <mac>48-21-0b-26-3f-ed</mac>
          <iface>enp88s0</iface>
          <name>NUC 2</name>
          <num-cores>2</num-cores>
          <interface-uri>opc.tcp://localhost:62541</interface-uri>
          <has-app>0</has-app>
        </enddevice>
        <enddevice>
          <mac>00-1B-21-ED-A9-92</mac>
          <iface>eth0</iface>
          <name>PCM Box</name>
          <num-cores>1</num-cores>
          <interface-uri>opc.tcp://localhost:62541</interface-uri>
          <has-app>0</has-app>
        </enddevice>

        <!-- Edges -->
        <enddevice>
          <mac>00-00-00-00-00-01</mac>
          <iface>enp8s0</iface>
          <name>Edge 1</name>
          <num-cores>4</num-cores>
          <interface-uri></interface-uri>
          <has-app>0</has-app>
        </enddevice>
        <enddevice>
          <mac>00-00-00-00-00-02</mac>
          <iface>enp8s0</iface>
          <name>Edge 2</name>
          <num-cores>4</num-cores>
          <interface-uri></interface-uri>
          <has-app>0</has-app>
        </enddevice>

        <!-- Router -->
        <enddevice>
          <mac>00-00-00-00-00-03</mac>
          <iface>eth0</iface>
          <name>Router</name>
          <num-cores>1</num-cores>
          <interface-uri></interface-uri>
          <has-app>0</has-app>
        </enddevice>

        <!-- Machines -->
        <enddevice>
          <mac>00-00-00-00-00-04</mac>
          <iface>eth0</iface>
          <name>Panda</name>
          <num-cores>1</num-cores>
          <interface-uri></interface-uri>
          <has-app>0</has-app>
        </enddevice>
        <enddevice>
          <mac>00-00-00-00-00-05</mac>
          <iface>eth0</iface>
          <name>vOSACA 1</name>
          <num-cores>1</num-cores>
          <interface-uri></interface-uri>
          <has-app>0</has-app>
        </enddevice>
        <enddevice>
          <mac>00-00-00-00-00-06</mac>
          <iface>eth0</iface>
          <name>vOSACA 2</name>
          <num-cores>1</num-cores>
          <interface-uri></interface-uri>
          <has-app>0</has-app>
        </enddevice>

      </enddevices>
      <switches>
        <!-- TSN Demo Setup -->
        <switch>
          <mac>01-02-03-04-05-06</mac>
          <name>KSwitch D10 1 [TSNDemo]</name>
          <ports-count>8</ports-count>
        </switch>
        <switch>
          <mac>01-02-03-04-05-07</mac>
          <name>KSwitch D10 2 [TSNDemo]</name>
          <ports-count>8</ports-count>
        </switch>
        <switch>
          <mac>01-02-03-04-05-08</mac>
          <name>KSwitch D10 3 [TSNDemo]</name>
          <ports-count>8</ports-count>
        </switch>

        <!-- Infrastructure -->
        <switch>
          <mac>01-02-03-04-05-09</mac>
          <name>KSwitch D10 4 [Infrastructure]</name>
          <ports-count>8</ports-count>
        </switch>
        <switch>
          <mac>01-02-03-04-05-10</mac>
          <name>KSwitch D10 5 [Infrastructure]</name>
          <ports-count>8</ports-count>
        </switch>
        <switch>
          <mac>01-02-03-04-05-11</mac>
          <name>NRT [Infrastructure]</name>
          <ports-count>8</ports-count>
        </switch>
      </switches>
    </devices>
    <!--
    <graph>
      <connections>
        <connection>
          <id>1</id>
          <from-mac>01-02-03-04-05-06</from-mac>
          <from-port>1</from-port>
          <to-mac>48-21-0b-26-3d-8a</to-mac>
          <to-port>1</to-port>
        </connection>
        <connection>
          <id>2</id>
          <from-mac>01-02-03-04-05-06</from-mac>
          <from-port>2</from-port>
          <to-mac>48-21-0b-26-3f-ed</to-mac>
          <to-port>1</to-port>
        </connection>
        <connection>
          <id>3</id>
          <from-mac>01-02-03-04-05-06</from-mac>
          <from-port>3</from-port>
          <to-mac>48-21-0b-26-3f-42</to-mac>
          <to-port>1</to-port>
        </connection>
      </connections>
    </graph>
    -->
  </topology>
  <!--
  <streams>
    <stream>
      <stream-id>48-21-0b-26-3d-8a:00-01</stream-id>
      <request>
        <talker>
          <stream-rank>
            <rank>1</rank>
          </stream-rank>
          <end-station-interfaces>
            <mac-address>48-21-0b-26-3d-8a</mac-address>
            <interface-name/>
          </end-station-interfaces>
          <data-frame-specification>
            <index>0</index>
            <ieee802-mac-addresses>
              <destination-mac-address>48-21-0b-26-3f-ed</destination-mac-address>
              <source-mac-address>48-21-0b-26-3d-8a</source-mac-address>
            </ieee802-mac-addresses>
          </data-frame-specification>
          <data-frame-specification>
            <index>1</index>
            <ieee802-vlan-tag>
              <priority-code-point>6</priority-code-point>
              <vlan-id>0</vlan-id>
            </ieee802-vlan-tag>
          </data-frame-specification>
          <traffic-specification>
            <interval>
              <numerator>1000000</numerator>
              <denominator>1000000000</denominator>
            </interval>
            <max-frames-per-interval>1</max-frames-per-interval>
            <max-frame-size>1</max-frame-size>
            <transmission-selection>0</transmission-selection>
            <time-aware>
              <earliest-transmit-offset>100</earliest-transmit-offset>
              <latest-transmit-offset>500000</latest-transmit-offset>
              <jitter>0</jitter>
            </time-aware>
          </traffic-specification>
          <user-to-network-requirements>
            <num-seamless-trees>1</num-seamless-trees>
            <max-latency>100000</max-latency>
          </user-to-network-requirements>
          <interface-capabilities>
            <vlan-tag-capable>true</vlan-tag-capable>
          </interface-capabilities>
        </talker>
        <listener-list>
          <listener>
            <index>0</index>
            <end-station-interfaces>
              <mac-address>48-21-0b-26-3f-ed</mac-address>
              <interface-name/>
            </end-station-interfaces>
            <user-to-network-requirements>
              <num-seamless-trees>1</num-seamless-trees>
              <max-latency>100000</max-latency>
            </user-to-network-requirements>
            <interface-capabilities>
              <vlan-tag-capable>true</vlan-tag-capable>
            </interface-capabilities>
          </listener>
        </listener-list>
      </request>
      <configured>1</configured>
      <configuration>
        <status-info>
          <talker-status>ready</talker-status>
          <listener-status>ready</listener-status>
          <failure-code>0</failure-code>
        </status-info>
        <talker>
          <interface-configuration>
            <interface-list>
              <mac-address>48-21-0b-26-3d-8a</mac-address>
              <interface-name/>
              <config-list>
                <index>0</index>
                <ieee802-mac-addresses>
                  <destination-mac-address>48-21-0b-26-3f-ed</destination-mac-address>
                  <source-mac-address>48-21-0b-26-3d-8a</source-mac-address>
                </ieee802-mac-addresses>
              </config-list>
              <config-list>
                <index>1</index>
                <ieee802-vlan-tag>
                  <priority-code-point>6</priority-code-point>
                  <vlan-id>3000</vlan-id>
                </ieee802-vlan-tag>
              </config-list>
              <config-list>
                <index>2</index>
                <time-aware-offset>100</time-aware-offset>
              </config-list>
            </interface-list>
          </interface-configuration>
          <accumulated-latency>60400</accumulated-latency>
        </talker>
        <listener-list>
          <listener>
            <index>0</index>
            <accumulated-latency>60400</accumulated-latency>
            <interface-configuration>
              <interface-list>
                <mac-address>48-21-0b-26-3f-ed</mac-address>
                <interface-name/>
                <config-list>
                  <index>0</index>
                  <ieee802-mac-addresses>
                    <destination-mac-address>48-21-0b-26-3f-ed</destination-mac-address>
                    <source-mac-address>48-21-0b-26-3d-8a</source-mac-address>
                  </ieee802-mac-addresses>
                </config-list>
                <config-list>
                  <index>1</index>
                  <ieee802-vlan-tag>
                    <priority-code-point>6</priority-code-point>
                    <vlan-id>3000</vlan-id>
                  </ieee802-vlan-tag>
                </config-list>
              </interface-list>
            </interface-configuration>
          </listener>
        </listener-list>
      </configuration>
    </stream>
    <stream>
      <stream-id>48-21-0b-26-3f-ed:00-01</stream-id>
      <request>
        <talker>
          <stream-rank>
            <rank>1</rank>
          </stream-rank>
          <end-station-interfaces>
            <mac-address>48-21-0b-26-3f-ed</mac-address>
            <interface-name/>
          </end-station-interfaces>
          <data-frame-specification>
            <index>0</index>
            <ieee802-mac-addresses>
              <destination-mac-address>48-21-0b-26-3f-42</destination-mac-address>
              <source-mac-address>48-21-0b-26-3f-ed</source-mac-address>
            </ieee802-mac-addresses>
          </data-frame-specification>
          <data-frame-specification>
            <index>1</index>
            <ieee802-vlan-tag>
              <priority-code-point>6</priority-code-point>
              <vlan-id>0</vlan-id>
            </ieee802-vlan-tag>
          </data-frame-specification>
          <traffic-specification>
            <interval>
              <numerator>1000000</numerator>
              <denominator>1000000000</denominator>
            </interval>
            <max-frames-per-interval>1</max-frames-per-interval>
            <max-frame-size>1</max-frame-size>
            <transmission-selection>0</transmission-selection>
            <time-aware>
              <earliest-transmit-offset>100</earliest-transmit-offset>
              <latest-transmit-offset>500000</latest-transmit-offset>
              <jitter>0</jitter>
            </time-aware>
          </traffic-specification>
          <user-to-network-requirements>
            <num-seamless-trees>1</num-seamless-trees>
            <max-latency>100000</max-latency>
          </user-to-network-requirements>
          <interface-capabilities>
            <vlan-tag-capable>true</vlan-tag-capable>
          </interface-capabilities>
        </talker>
        <listener-list>
          <listener>
            <index>0</index>
            <end-station-interfaces>
              <mac-address>48-21-0b-26-3f-42</mac-address>
              <interface-name/>
            </end-station-interfaces>
            <user-to-network-requirements>
              <num-seamless-trees>1</num-seamless-trees>
              <max-latency>100000</max-latency>
            </user-to-network-requirements>
            <interface-capabilities>
              <vlan-tag-capable>true</vlan-tag-capable>
            </interface-capabilities>
          </listener>
        </listener-list>
      </request>
      <configured>1</configured>
      <configuration>
        <status-info>
          <talker-status>ready</talker-status>
          <listener-status>ready</listener-status>
          <failure-code>0</failure-code>
        </status-info>
        <talker>
          <interface-configuration>
            <interface-list>
              <mac-address>48-21-0b-26-3f-ed</mac-address>
              <interface-name/>
              <config-list>
                <index>0</index>
                <ieee802-mac-addresses>
                  <destination-mac-address>48-21-0b-26-3f-42</destination-mac-address>
                  <source-mac-address>48-21-0b-26-3f-ed</source-mac-address>
                </ieee802-mac-addresses>
              </config-list>
              <config-list>
                <index>1</index>
                <ieee802-vlan-tag>
                  <priority-code-point>6</priority-code-point>
                  <vlan-id>3000</vlan-id>
                </ieee802-vlan-tag>
              </config-list>
              <config-list>
                <index>2</index>
                <time-aware-offset>100</time-aware-offset>
              </config-list>
            </interface-list>
          </interface-configuration>
          <accumulated-latency>60400</accumulated-latency>
        </talker>
        <listener-list>
          <listener>
            <index>0</index>
            <accumulated-latency>60400</accumulated-latency>
            <interface-configuration>
              <interface-list>
                <mac-address>48-21-0b-26-3f-42</mac-address>
                <interface-name/>
                <config-list>
                  <index>0</index>
                  <ieee802-mac-addresses>
                    <destination-mac-address>48-21-0b-26-3f-42</destination-mac-address>
                    <source-mac-address>48-21-0b-26-3f-ed</source-mac-address>
                  </ieee802-mac-addresses>
                </config-list>
                <config-list>
                  <index>1</index>
                  <ieee802-vlan-tag>
                    <priority-code-point>6</priority-code-point>
                    <vlan-id>3000</vlan-id>
                  </ieee802-vlan-tag>
                </config-list>
              </interface-list>
            </interface-configuration>
          </listener>
        </listener-list>
      </configuration>
    </stream>
  </streams>
  -->
  <plugin-running>true</plugin-running>
</tsn-uni>