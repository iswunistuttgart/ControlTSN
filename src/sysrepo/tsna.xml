<tsn-uni xmlns="urn:isw:controltsn">
  <modules>
    <mod>
        <id>1</id>
        <name>REST</name>
        <desc>Exposes a REST API to interact with the framework</desc>
        <executable-path>./RESTModule</executable-path>
        <subscribed-events-mask>65535</subscribed-events-mask>
        <registered>1</registered>
        <pid>0</pid>
      </mod>
      <mod>
        <id>2</id>
        <name>CUC</name>
        <desc>Represents the Central User Controller in the network based on the central configuration approach of TSN</desc>
        <executable-path>./CUCModule</executable-path>
        <subscribed-events-mask>203567</subscribed-events-mask>
        <registered>1</registered>
        <pid>0</pid>
        <data>
          <entry>
            <data-name>cnc_url</data-name>
            <data-type>string</data-type>
            <data-value>http://localhost:11067/streams/compute_requests</data-value>
          </entry>
        </data>
      </mod>
      <mod>
        <id>3</id>
        <name>Monitor</name>
        <desc>This module monitors the network including the streams and their latency, synchronization etc.</desc>
        <executable-path>./MonitorModule</executable-path>
        <subscribed-events-mask>203567</subscribed-events-mask>
        <registered>1</registered>
        <pid>0</pid>
      </mod>
      <mod>
        <id>4</id>
        <name>Container</name>
        <desc>This module performs the application deployment to the enddevices.</desc>
        <executable-path>./ContainerModule</executable-path>
        <subscribed-events-mask>251658240</subscribed-events-mask>
        <registered>1</registered>
        <pid>0</pid>
        <data>
          <entry>
            <data-name>registry_url</data-name>
            <data-type>string</data-type>
            <data-value>http://containerregistry:5000</data-value>
          </entry>
          <entry>
            <!--
                Access to the Kubernetes control plane has to be
                authenticated. Only authorized users are allowed to perform
                meaningful cluster actions. Therefore, we use `kubectl proxy`.
                It establishes a channel to the cluster and we can use
                localhost as communication endpoint without worrying about
                authentication.
            -->
            <data-name>kubernetes_url</data-name>
            <data-type>string</data-type>
            <data-value>http://localhost:8001</data-value>
          </entry>
        </data>
      </mod>
  </modules>
  <application>
    <apps>
      <app>
        <id>Sensor_0.0.1</id>
        <name>Sensor</name>
        <desc>Sensor Application</desc>
        <version>0.0.1</version>
        <has-image>1</has-image>
        <image-ref>SensorImage_0.0.1</image-ref>
        <has-mac>1</has-mac>
        <mac>48-21-0b-26-3d-8a</mac>
      </app>
      <app>
        <id>PLC_0.0.1</id>
        <name>PLC</name>
        <desc>PLC Application</desc>
        <version>0.0.1</version>
        <has-image>1</has-image>
        <image-ref>PLCImage_0.0.1</image-ref>
        <has-mac>1</has-mac>
        <mac>48-21-0b-26-3f-ed</mac>
      </app>
      <app>
        <id>ConveyorBelt_0.0.1</id>
        <name>ConveyorBelt</name>
        <desc>ConveyorBelt Application</desc>
        <version>0.0.1</version>
        <has-image>1</has-image>
        <image-ref>ConveyorBeltImage_0.0.1</image-ref>
        <has-mac>1</has-mac>
        <mac>48-21-0b-26-3f-42</mac>
      </app>
    </apps>
    <images>
      <image>
        <id>SensorImage_0.0.1</id>
        <name>SensorImage</name>
        <desc>Sensor Image</desc>
        <version>0.0.1</version>
      </image>
      <image>
        <id>PLCImage_0.0.1</id>
        <name>PLCImage</name>
        <desc>PLC Image</desc>
        <version>0.0.1</version>
      </image>
      <image>
        <id>ConveyorBeltImage_0.0.1</id>
        <name>ConveyorBeltImage</name>
        <desc>ConveyorBelt Image</desc>
        <version>0.0.1</version>
      </image>
    </images>
  </application>
  <topology>
    <devices>
      <enddevices>
        <enddevice>
          <mac>48-21-0b-26-3d-8a</mac>
          <interface-uri>opc.tcp://10.200.9.101:62541</interface-uri>
          <has-app>1</has-app>
          <apps>
            <app><app-ref>Sensor_0.0.1</app-ref></app>
          </apps>
        </enddevice>
        <enddevice>
          <mac>48-21-0b-26-3f-ed</mac>
          <interface-uri>opc.tcp://10.200.9.102:62542</interface-uri>
          <has-app>1</has-app>
          <apps>
            <app><app-ref>PLC_0.0.1</app-ref></app>
          </apps>
        </enddevice>
        <enddevice>
          <mac>48-21-0b-26-3f-42</mac>
          <interface-uri>opc.tcp://10.200.9.103:62543</interface-uri>
          <has-app>1</has-app>
          <apps>
            <app><app-ref>ConveyorBelt_0.0.1</app-ref></app>
          </apps>
        </enddevice>
      </enddevices>
      <switches>
        <switch>
          <mac>01-02-03-04-05-06</mac>
          <ports-count>56</ports-count>
        </switch>
      </switches>
    </devices>
    <graph>
      <connections>
        <connection>
          <id>1</id>
          <from-mac>01-02-03-04-05-06</from-mac>
          <from-port>1</from-port>
          <to-mac>48-21-0b-26-3d-8a</to-mac>
          <to-port>1</to-port>
        </connection>
        <connection>
          <id>2</id>
          <from-mac>01-02-03-04-05-06</from-mac>
          <from-port>2</from-port>
          <to-mac>48-21-0b-26-3f-ed</to-mac>
          <to-port>1</to-port>
        </connection>
        <connection>
          <id>3</id>
          <from-mac>01-02-03-04-05-06</from-mac>
          <from-port>3</from-port>
          <to-mac>48-21-0b-26-3f-42</to-mac>
          <to-port>1</to-port>
        </connection>
      </connections>
    </graph>
  </topology>
  <streams>
    <stream>
      <stream-id>48-21-0b-26-3d-8a:00-01</stream-id>
      <request>
        <talker>
          <stream-rank>
            <rank>1</rank>
          </stream-rank>
          <end-station-interfaces>
            <mac-address>48-21-0b-26-3d-8a</mac-address>
            <interface-name/>
          </end-station-interfaces>
          <data-frame-specification>
            <index>0</index>
            <ieee802-mac-addresses>
              <destination-mac-address>48-21-0b-26-3f-ed</destination-mac-address>
              <source-mac-address>48-21-0b-26-3d-8a</source-mac-address>
            </ieee802-mac-addresses>
          </data-frame-specification>
          <data-frame-specification>
            <index>1</index>
            <ieee802-vlan-tag>
              <priority-code-point>6</priority-code-point>
              <vlan-id>0</vlan-id>
            </ieee802-vlan-tag>
          </data-frame-specification>
          <traffic-specification>
            <interval>
              <numerator>1000000</numerator>
              <denominator>1000000000</denominator>
            </interval>
            <max-frames-per-interval>1</max-frames-per-interval>
            <max-frame-size>1</max-frame-size>
            <transmission-selection>0</transmission-selection>
            <time-aware>
              <earliest-transmit-offset>100</earliest-transmit-offset>
              <latest-transmit-offset>500000</latest-transmit-offset>
              <jitter>0</jitter>
            </time-aware>
          </traffic-specification>
          <user-to-network-requirements>
            <num-seamless-trees>1</num-seamless-trees>
            <max-latency>100000</max-latency>
          </user-to-network-requirements>
          <interface-capabilities>
            <vlan-tag-capable>true</vlan-tag-capable>
          </interface-capabilities>
        </talker>
        <listener-list>
          <listener>
            <index>0</index>
            <end-station-interfaces>
              <mac-address>48-21-0b-26-3f-ed</mac-address>
              <interface-name/>
            </end-station-interfaces>
            <user-to-network-requirements>
              <num-seamless-trees>1</num-seamless-trees>
              <max-latency>100000</max-latency>
            </user-to-network-requirements>
            <interface-capabilities>
              <vlan-tag-capable>true</vlan-tag-capable>
            </interface-capabilities>
          </listener>
        </listener-list>
      </request>
      <configured>0</configured>
    </stream>
    <stream>
      <stream-id>48-21-0b-26-3f-ed:00-01</stream-id>
      <request>
        <talker>
          <stream-rank>
            <rank>1</rank>
          </stream-rank>
          <end-station-interfaces>
            <mac-address>48-21-0b-26-3f-ed</mac-address>
            <interface-name/>
          </end-station-interfaces>
          <data-frame-specification>
            <index>0</index>
            <ieee802-mac-addresses>
              <destination-mac-address>48-21-0b-26-3f-42</destination-mac-address>
              <source-mac-address>48-21-0b-26-3f-ed</source-mac-address>
            </ieee802-mac-addresses>
          </data-frame-specification>
          <data-frame-specification>
            <index>1</index>
            <ieee802-vlan-tag>
              <priority-code-point>6</priority-code-point>
              <vlan-id>0</vlan-id>
            </ieee802-vlan-tag>
          </data-frame-specification>
          <traffic-specification>
            <interval>
              <numerator>1000000</numerator>
              <denominator>1000000000</denominator>
            </interval>
            <max-frames-per-interval>1</max-frames-per-interval>
            <max-frame-size>1</max-frame-size>
            <transmission-selection>0</transmission-selection>
            <time-aware>
              <earliest-transmit-offset>100</earliest-transmit-offset>
              <latest-transmit-offset>500000</latest-transmit-offset>
              <jitter>0</jitter>
            </time-aware>
          </traffic-specification>
          <user-to-network-requirements>
            <num-seamless-trees>1</num-seamless-trees>
            <max-latency>100000</max-latency>
          </user-to-network-requirements>
          <interface-capabilities>
            <vlan-tag-capable>true</vlan-tag-capable>
          </interface-capabilities>
        </talker>
        <listener-list>
          <listener>
            <index>0</index>
            <end-station-interfaces>
              <mac-address>48-21-0b-26-3f-42</mac-address>
              <interface-name/>
            </end-station-interfaces>
            <user-to-network-requirements>
              <num-seamless-trees>1</num-seamless-trees>
              <max-latency>100000</max-latency>
            </user-to-network-requirements>
            <interface-capabilities>
              <vlan-tag-capable>true</vlan-tag-capable>
            </interface-capabilities>
          </listener>
        </listener-list>
      </request>
      <configured>0</configured>
    </stream>
  </streams>
</tsn-uni>
