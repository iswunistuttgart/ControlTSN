<tsn-uni xmlns="urn:isw:controltsn">
  <modules>
    <mod>
      <id>1</id>
      <name>REST</name>
      <desc>Exposes a REST API to interact with the framework</desc>
      <executable-path>./RESTModule</executable-path>
      <subscribed-events-mask>65535</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
    </mod>
    <mod>
      <id>2</id>
      <name>CUC</name>
      <desc>Represents the Central User Controller in the network based on the central configuration approach of TSN</desc>
      <executable-path>./CUCModule</executable-path>
      <subscribed-events-mask>203567</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
      <data>
        <entry>
          <data-name>cnc_url</data-name>
          <data-type>string</data-type>
          <data-value>http://localhost:11067</data-value>
        </entry>
      </data>
    </mod>
    <mod>
      <id>3</id>
      <name>Monitor</name>
      <desc>This module monitors the network including the streams and their latency, synchronization etc.</desc>
      <executable-path>./MonitorModule</executable-path>
      <subscribed-events-mask>203567</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
    </mod>
    <mod>
      <id>4</id>
      <name>Container</name>
      <desc>This module performs the application deployment to the enddevices.</desc>
      <executable-path>./ContainerModule</executable-path>
      <subscribed-events-mask>251658240</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
      <data>
        <entry>
          <data-name>registry_url</data-name>
          <data-type>string</data-type>
          <data-value>http://containerregistry:5000</data-value>
        </entry>
        <entry>
          <!--
              Access to the Kubernetes control plane has to be
              authenticated. Only authorized users are allowed to perform
              meaningful cluster actions. Therefore, we use `kubectl proxy`.
              It establishes a channel to the cluster and we can use
              localhost as communication endpoint without worrying about
              authentication.
          -->
          <data-name>kubernetes_url</data-name>
          <data-type>string</data-type>
          <data-value>http://localhost:8001</data-value>
        </entry>
      </data>
    </mod>
    <mod>
      <id>5</id>
      <name>AppConfiguration</name>
      <desc>
        This module performs the application configuration (parameters,
        network settings, ...) on the enddevices.
      </desc>
      <executable-path>./ConfigurationModule</executable-path>
      <subscribed-events-mask>4026531840</subscribed-events-mask>
      <registered>1</registered>
      <pid>0</pid>
    </mod>
  </modules>
  <application>
    <apps>
      <app>
        <id>cyclictest</id>
        <name>Cyclictest</name>
        <desc>Cyclictest Dummy Application</desc>
        <version>1.0</version>
        <has-image>1</has-image>
        <image-ref>kurt:5000/cyclictest</image-ref>
        <has-mac>1</has-mac>
        <mac>a8-a1-59-2c-a8-dc</mac>
        <parameters>
          <parameter>
            <param-name>current_status</param-name>
            <param-type>string</param-type>
            <param-value>INIT</param-value>
            <param-desc>Current Application Status</param-desc>
          </parameter>
          <parameter>
            <param-name>commanded_status</param-name>
            <param-type>string</param-type>
            <param-value>INIT</param-value>
            <param-desc>Commanded Application Status</param-desc>
          </parameter>
          <parameter>
            <param-name>destination_mac</param-name>
            <param-type>string</param-type>
            <param-value>aa-bb-cc-dd-ee-ff</param-value>
            <param-desc>Destination MAC address</param-desc>
          </parameter>
          <parameter>
            <param-name>subscribed_mac</param-name>
            <param-type>string</param-type>
            <param-value>ff-ee-dd-cc-bb-aa</param-value>
            <param-desc>Subscribed MAC address</param-desc>
          </parameter>
          <parameter>
            <param-name>interface</param-name>
            <param-type>string</param-type>
            <param-value>eth0</param-value>
            <param-desc>Network Interface</param-desc>
          </parameter>
          <parameter>
            <param-name>sendreceive_enabled</param-name>
            <param-type>boolean</param-type>
            <param-value>1</param-value>
            <param-desc>Send/Receive enable</param-desc>
          </parameter>
          <parameter>
            <param-name>vplc_code</param-name>
            <param-type>string</param-type>
            <param-value>vplc program</param-value>
            <param-desc>Test for application specific parameter</param-desc>
          </parameter>
        </parameters>
      </app>
      <app>
        <id>TestApp1</id>
        <name>TestApp1</name>
        <desc>Sample OPC/UA PubSub App 1</desc>
        <version>1.0</version>
        <has-image>1</has-image>
        <image-ref>kurt:5000/testapp</image-ref>
        <has-mac>1</has-mac>
        <mac>a8-a1-59-2c-a8-dc</mac>
        <parameters>
          <parameter>
            <param-name>current_status</param-name>
            <param-type>string</param-type>
            <param-value>INIT</param-value>
            <param-desc>Current Application Status</param-desc>
          </parameter>
          <parameter>
            <param-name>commanded_status</param-name>
            <param-type>string</param-type>
            <param-value>INIT</param-value>
            <param-desc>Commanded Application Status</param-desc>
          </parameter>
          <parameter>
            <param-name>sendreceive_enabled</param-name>
            <param-type>boolean</param-type>
            <param-value>1</param-value>
            <param-desc>Send/Receive enable</param-desc>
          </parameter>
          <parameter>
            <param-name>base_time</param-name>
            <param-type>uint64</param-type>
            <param-value>0</param-value>
            <param-desc>Application Base Time</param-desc>
          </parameter>
          <parameter>
            <param-name>qbv_offset</param-name>
            <param-type>int32</param-type>
            <param-value>0</param-value>
            <param-desc>QBv offset within cycle</param-desc>
          </parameter>
          <parameter>
            <param-name>destination_mac</param-name>
            <param-type>string</param-type>
            <param-value>opc.eth://01-00-5E-7F-00-01:1.3</param-value>
            <param-desc>Destination MAC address</param-desc>
          </parameter>
          <parameter>
            <param-name>subscribed_mac</param-name>
            <param-type>string</param-type>
            <param-value>opc.eth://01-00-5E-7F-00-02:1.3</param-value>
            <param-desc>Subscribed MAC address</param-desc>
          </parameter>
          <parameter>
            <param-name>interface</param-name>
            <param-type>string</param-type>
            <param-value>eth0</param-value>
            <param-desc>Network Interface</param-desc>
          </parameter>
          <parameter>
            <param-name>cycle_time</param-name>
            <param-type>decimal64</param-type>
            <param-value>0.125</param-value>
            <param-desc>Application Cycle Time</param-desc>
          </parameter>
          <parameter>
            <param-name>socket_priority</param-name>
            <param-type>int32</param-type>
            <param-value>3</param-value>
            <param-desc>Socket priority</param-desc>
          </parameter>
          <parameter>
            <param-name>wcet</param-name>
            <param-type>uint32</param-type>
            <param-value>0</param-value>
            <param-desc>Application Wakeup latency</param-desc>
          </parameter>
          <parameter>
            <param-name>appspecific</param-name>
            <param-type>string</param-type>
            <param-value>test</param-value>
            <param-desc>Test for application specific parameter</param-desc>
          </parameter>
        </parameters>
      </app>
      <app>
        <id>TestApp2</id>
        <name>TestApp2</name>
        <desc>Sample OPC/UA PubSub App 2</desc>
        <version>1.0</version>
        <has-image>1</has-image>
        <image-ref>kurt:5000/testapp</image-ref>
        <has-mac>1</has-mac>
        <mac>a8-a1-59-2c-a8-dc</mac>
        <parameters>
          <parameter>
            <param-name>current_status</param-name>
            <param-type>string</param-type>
            <param-value>INIT</param-value>
            <param-desc>Current Application Status</param-desc>
          </parameter>
          <parameter>
            <param-name>commanded_status</param-name>
            <param-type>string</param-type>
            <param-value>INIT</param-value>
            <param-desc>Commanded Application Status</param-desc>
          </parameter>
          <parameter>
            <param-name>sendreceive_enabled</param-name>
            <param-type>boolean</param-type>
            <param-value>1</param-value>
            <param-desc>Send/Receive enable</param-desc>
          </parameter>
          <parameter>
            <param-name>base_time</param-name>
            <param-type>uint64</param-type>
            <param-value>0</param-value>
            <param-desc>Application Base Time</param-desc>
          </parameter>
          <parameter>
            <param-name>qbv_offset</param-name>
            <param-type>int32</param-type>
            <param-value>0</param-value>
            <param-desc>QBv offset within cycle</param-desc>
          </parameter>
          <parameter>
            <param-name>destination_mac</param-name>
            <param-type>string</param-type>
            <param-value>opc.eth://01-00-5E-7F-00-03:1.4</param-value>
            <param-desc>Destination MAC address</param-desc>
          </parameter>
          <parameter>
            <param-name>subscribed_mac</param-name>
            <param-type>string</param-type>
            <param-value>opc.eth://01-00-5E-7F-00-04:1.4</param-value>
            <param-desc>Subscribed MAC address</param-desc>
          </parameter>
          <parameter>
            <param-name>interface</param-name>
            <param-type>string</param-type>
            <param-value>eth0</param-value>
            <param-desc>Network Interface</param-desc>
          </parameter>
          <parameter>
            <param-name>cycle_time</param-name>
            <param-type>decimal64</param-type>
            <param-value>0.125</param-value>
            <param-desc>Application Cycle Time</param-desc>
          </parameter>
          <parameter>
            <param-name>socket_priority</param-name>
            <param-type>int32</param-type>
            <param-value>3</param-value>
            <param-desc>Socket priority</param-desc>
          </parameter>
          <parameter>
            <param-name>wcet</param-name>
            <param-type>uint32</param-type>
            <param-value>0</param-value>
            <param-desc>Application Wakeup latency</param-desc>
          </parameter>
          <parameter>
            <param-name>appspecific</param-name>
            <param-type>string</param-type>
            <param-value>test</param-value>
            <param-desc>Test for application specific parameter</param-desc>
          </parameter>
        </parameters>
      </app>
      <app>
        <id>TestApp3</id>
        <name>TestApp3</name>
        <desc>Sample OPC/UA PubSub App 3</desc>
        <version>1.0</version>
        <has-image>1</has-image>
        <image-ref>kurt:5000/testapp</image-ref>
        <has-mac>1</has-mac>
        <mac>a8-a1-59-2c-a8-dc</mac>
        <parameters>
          <parameter>
            <param-name>current_status</param-name>
            <param-type>string</param-type>
            <param-value>INIT</param-value>
            <param-desc>Current Application Status</param-desc>
          </parameter>
          <parameter>
            <param-name>commanded_status</param-name>
            <param-type>string</param-type>
            <param-value>INIT</param-value>
            <param-desc>Commanded Application Status</param-desc>
          </parameter>
          <parameter>
            <param-name>sendreceive_enabled</param-name>
            <param-type>boolean</param-type>
            <param-value>1</param-value>
            <param-desc>Send/Receive enable</param-desc>
          </parameter>
          <parameter>
            <param-name>base_time</param-name>
            <param-type>uint64</param-type>
            <param-value>0</param-value>
            <param-desc>Application Base Time</param-desc>
          </parameter>
          <parameter>
            <param-name>qbv_offset</param-name>
            <param-type>int32</param-type>
            <param-value>0</param-value>
            <param-desc>QBv offset within cycle</param-desc>
          </parameter>
          <parameter>
            <param-name>destination_mac</param-name>
            <param-type>string</param-type>
            <param-value>opc.eth://01-00-5E-7F-00-05:1.5</param-value>
            <param-desc>Destination MAC address</param-desc>
          </parameter>
          <parameter>
            <param-name>subscribed_mac</param-name>
            <param-type>string</param-type>
            <param-value>opc.eth://01-00-5E-7F-00-06:1.5</param-value>
            <param-desc>Subscribed MAC address</param-desc>
          </parameter>
          <parameter>
            <param-name>interface</param-name>
            <param-type>string</param-type>
            <param-value>eth0</param-value>
            <param-desc>Network Interface</param-desc>
          </parameter>
          <parameter>
            <param-name>cycle_time</param-name>
            <param-type>decimal64</param-type>
            <param-value>0.125</param-value>
            <param-desc>Application Cycle Time</param-desc>
          </parameter>
          <parameter>
            <param-name>socket_priority</param-name>
            <param-type>int32</param-type>
            <param-value>3</param-value>
            <param-desc>Socket priority</param-desc>
          </parameter>
          <parameter>
            <param-name>wcet</param-name>
            <param-type>uint32</param-type>
            <param-value>0</param-value>
            <param-desc>Application Wakeup latency</param-desc>
          </parameter>
          <parameter>
            <param-name>appspecific</param-name>
            <param-type>string</param-type>
            <param-value>test</param-value>
            <param-desc>Test for application specific parameter</param-desc>
          </parameter>
        </parameters>
      </app>
    </apps>
    <images>
      <!-- Cyclictest -->
      <image>
        <id>kurt:5000/cyclictest</id>
        <name>kurt:5000/cyclictest</name>
        <desc>Cyclictest Image</desc>
        <version>1.0</version>
      </image>
      <!-- Sample Endpoint RT OPC/UA PubSub App -->
      <image>
        <id>kurt:5000/testapp</id>
        <name>kurt:5000/testapp</name>
        <desc>Sample OPC/UA PubSub Image</desc>
        <version>1.0</version>
      </image>
    </images>
  </application>
  <topology>
    <devices>
      <enddevices>
        <enddevice>
          <mac>a8-a1-59-2c-a8-db</mac>
          <interface-uri>opc.tcp://worker1:4840</interface-uri>
          <has-app>1</has-app>
          <apps>
            <app>
              <app-ref>TestApp1</app-ref>
            </app>
            <app>
              <app-ref>TestApp2</app-ref>
            </app>
            <app>
              <app-ref>TestApp3</app-ref>
            </app>
          </apps>
        </enddevice>
      </enddevices>
    </devices>
  </topology>
</tsn-uni>
